name: ðŸš€ DÃ©ploiement IA + Streamlit sur Hugging Face

on:
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ“¦ Cloner le dÃ©pÃ´t
        uses: actions/checkout@v3
        with:
          lfs: true

      - name: ðŸ Configurer Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: ðŸ“¥ Installer les dÃ©pendances
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: ðŸ§¹ PrÃ©traitement des donnÃ©es
        run: python preprocessing.py

      - name: ðŸ¤– EntraÃ®ner le modÃ¨le
        run: python training.py

      - name: ðŸ§ª Ã‰valuer le modÃ¨le
        run: python evaluation.py

      - name: ðŸ” Tester une prÃ©diction
        run: python model.py

      - name: ðŸ“§ Envoyer une notification par email
        run: python send_email.py

      - name: ðŸ“‚ PrÃ©parer le dossier Hugging Face
        run: |
          mkdir -p hf_space
          cp app.py hf_space/
          cp model.py hf_space/
          cp -r model/ hf_space/
          cp README.md hf_space/
          echo "streamlit run app.py" > hf_space/app.sh
          chmod +x hf_space/app.sh
